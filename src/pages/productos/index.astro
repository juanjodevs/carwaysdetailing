---
export const prerender = true;

import Layout from "../../layouts/Layout.astro"

const {data: products} = await fetch(`${import.meta.env.STRAPI_URL}/api/products?populate=*`).then((res) => res.json())
---
<Layout title="Nuestros productos">
    <main>
        <p class="text-2xl">Nuestros productos</p>
        <div class="flex flex-col">
            {
                products.map((product) => (
                    <div class="flex my-2">
                        <div class="max-h-24 max-w-24">
                            {
                                product.attributes.images.data && (
                                    <img src={`${import.meta.env.STRAPI_URL}${product.attributes.images.data[0].attributes.url}`} />
                                )
                            }                            
                        </div>
                        <div class="flex flex-col justify-center ml-5">
                            <a href={`/productos/${product.attributes.slug}`}>{product.attributes.name} - {product.attributes.price}â‚¬</a>
                        </div>
                    </div>
                ))
            }
        </div>
    </main>
</Layout>
